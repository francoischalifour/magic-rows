{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///magic-rows.min.js","webpack:///webpack/bootstrap 9ca5a4b2d19767ebe47d","webpack:///./src/magic-rows.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","MagicRows","form","rows","concat","querySelectorAll","maxRows","dataset","placeholderFormat","formatPlaceholder","idFormat","formatId","nameFormat","formatName","noRows","lastRow","addRow","bind","addEventListeners","value","addEventListener","removeEventListener","removeEventListeners","cloneRow","newRow","fillRow","insertRow","push","row","cloneNode","getAttribute","placeholder","name","setAttribute","getNextValue","reference","node","parentNode","insertBefore","nextSibling","format","includes","replace","getPatternNumbers","split","getLetter","guessNextPatternNumber","guessNextValue","noDigits","fill","join","slice","likelyAttribute","numberGuessed","Number","detection","n","hasNumber","number","String","fromCharCode","toUpperCase","string","test","window","document","forEach"],"mappings":"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","file":"magic-rows.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"magic-rows\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"magic-rows\"] = factory();\n\telse\n\t\troot[\"magic-rows\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","/*!\n * \n *    magic-rows v1.0.2\n *    Adds rows to your forms automagically\n *    Copyright (c) 2016 Francois Chalifour\n *    https://github.com/francoischalifour/magic-rows\n *    MIT license\n * \n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"magic-rows\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"magic-rows\"] = factory();\n\telse\n\t\troot[\"magic-rows\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar MagicRows = function () {\n\t  function MagicRows(form) {\n\t    _classCallCheck(this, MagicRows);\n\t\n\t    if (!form) return;\n\t\n\t    this.rows = [].concat(_toConsumableArray(form.querySelectorAll('input[type=\"text\"], input[type=\"email\"]')));\n\t\n\t    this.maxRows = form.dataset.maxRows || 6;\n\t    this.placeholderFormat = form.dataset.formatPlaceholder;\n\t    this.idFormat = form.dataset.formatId;\n\t    this.nameFormat = form.dataset.formatName;\n\t\n\t    this.noRows = this.rows.length;\n\t    this.lastRow = this.rows[this.noRows - 1];\n\t\n\t    this.addRow = this.addRow.bind(this);\n\t\n\t    this.addEventListeners();\n\t  }\n\t\n\t  _createClass(MagicRows, [{\n\t    key: 'addEventListeners',\n\t    value: function addEventListeners() {\n\t      if (!this.lastRow) return;\n\t\n\t      this.lastRow.addEventListener('focus', this.addRow);\n\t      this.lastRow.addEventListener('change', this.addRow);\n\t    }\n\t  }, {\n\t    key: 'removeEventListeners',\n\t    value: function removeEventListeners() {\n\t      if (!this.lastRow) return;\n\t\n\t      this.lastRow.removeEventListener('focus', this.addRow);\n\t      this.lastRow.removeEventListener('change', this.addRow);\n\t    }\n\t  }, {\n\t    key: 'addRow',\n\t    value: function addRow() {\n\t      if (this.noRows >= this.maxRows) return;\n\t      if (this.noRows > 1) {\n\t        if (!this.rows[this.noRows - 2].value) return;\n\t      }\n\t\n\t      this.removeEventListeners();\n\t\n\t      this.noRows++;\n\t\n\t      var cloneRow = this.cloneRow(this.lastRow);\n\t      var newRow = this.fillRow(cloneRow);\n\t\n\t      this.insertRow(this.lastRow, newRow);\n\t\n\t      this.lastRow = newRow;\n\t      this.rows.push(this.lastRow);\n\t\n\t      this.addEventListeners();\n\t    }\n\t  }, {\n\t    key: 'cloneRow',\n\t    value: function cloneRow(row) {\n\t      var newRow = this.lastRow.cloneNode(true);\n\t      newRow.value = '';\n\t\n\t      return newRow;\n\t    }\n\t  }, {\n\t    key: 'fillRow',\n\t    value: function fillRow(row) {\n\t      var id = row.getAttribute('id');\n\t      var placeholder = row.getAttribute('placeholder');\n\t      var name = row.getAttribute('name');\n\t\n\t      if (id) row.setAttribute('id', this.getNextValue(id, this.idFormat));\n\t      if (placeholder) row.setAttribute('placeholder', this.getNextValue(placeholder, this.placeholderFormat));\n\t      if (name) row.setAttribute('name', this.getNextValue(name, this.nameFormat));\n\t\n\t      return row;\n\t    }\n\t  }, {\n\t    key: 'insertRow',\n\t    value: function insertRow(reference, node) {\n\t      reference.parentNode.insertBefore(node, reference.nextSibling);\n\t    }\n\t  }, {\n\t    key: 'getNextValue',\n\t    value: function getNextValue(value, format) {\n\t      if (format) {\n\t        return format.includes('$') ? format.replace(/\\$+/g, this.getPatternNumbers(format, format.split('$').length - 1)) : format.includes('@') ? format.replace('@', this.getLetter(this.guessNextPatternNumber())) : this.guessNextValue(value);\n\t      } else {\n\t        return this.guessNextValue(value, true);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'getPatternNumbers',\n\t    value: function getPatternNumbers(format, noDigits) {\n\t      return (Array(noDigits).fill('0').join('') + this.guessNextPatternNumber()).slice(-noDigits);\n\t    }\n\t  }, {\n\t    key: 'guessNextPatternNumber',\n\t    value: function guessNextPatternNumber() {\n\t      var likelyAttribute = this.lastRow.getAttribute('id') || this.lastRow.getAttribute('name') || this.lastRow.getAttribute('placeholder');\n\t\n\t      var numberGuessed = Number(likelyAttribute.replace(/^\\D+/g, '')) + 1;\n\t\n\t      return numberGuessed;\n\t    }\n\t  }, {\n\t    key: 'guessNextValue',\n\t    value: function guessNextValue(value, detection) {\n\t      return detection ? value.replace(/\\d+/g, function (n) {\n\t        return ++n;\n\t      }) : this.hasNumber(value) ? value.replace(/\\d+/g, this.getPatternNumbers(value, value.replace(/^\\D+/g, '').length)) : value + '-' + this.noRows;\n\t    }\n\t  }, {\n\t    key: 'getLetter',\n\t    value: function getLetter(number) {\n\t      return String.fromCharCode(96 + number).toUpperCase();\n\t    }\n\t  }, {\n\t    key: 'hasNumber',\n\t    value: function hasNumber(string) {\n\t      return (/\\d/.test(string)\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return MagicRows;\n\t}();\n\t\n\twindow.addEventListener('load', function () {\n\t  [].concat(_toConsumableArray(document.querySelectorAll('[data-action=\"magic-rows\"]'))).forEach(function (form) {\n\t    return new MagicRows(form);\n\t  });\n\t});\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** magic-rows.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9ca5a4b2d19767ebe47d\n **/","class MagicRows {\n  constructor (form) {\n    if (!form) return\n\n    this.rows = [...form.querySelectorAll('input[type=\"text\"], input[type=\"email\"]')]\n\n    this.maxRows = form.dataset.maxRows || 6\n    this.placeholderFormat = form.dataset.formatPlaceholder\n    this.idFormat = form.dataset.formatId\n    this.nameFormat = form.dataset.formatName\n\n    this.noRows = this.rows.length\n    this.lastRow = this.rows[this.noRows - 1]\n\n    this.addRow = this.addRow.bind(this)\n\n    this.addEventListeners()\n  }\n\n  addEventListeners () {\n    if (!this.lastRow) return\n\n    this.lastRow.addEventListener('focus', this.addRow)\n    this.lastRow.addEventListener('change', this.addRow)\n  }\n\n  removeEventListeners () {\n    if (!this.lastRow) return\n\n    this.lastRow.removeEventListener('focus', this.addRow)\n    this.lastRow.removeEventListener('change', this.addRow)\n  }\n\n  addRow () {\n    if (this.noRows >= this.maxRows) return\n    if (this.noRows > 1) {\n      if (!this.rows[this.noRows - 2].value) return\n    }\n\n    this.removeEventListeners()\n\n    this.noRows++\n\n    const cloneRow = this.cloneRow(this.lastRow)\n    const newRow = this.fillRow(cloneRow)\n\n    this.insertRow(this.lastRow, newRow)\n\n    this.lastRow = newRow\n    this.rows.push(this.lastRow)\n\n    this.addEventListeners()\n  }\n\n  cloneRow (row) {\n    const newRow = this.lastRow.cloneNode(true)\n    newRow.value = ''\n\n    return newRow\n  }\n\n  fillRow (row) {\n    const id = row.getAttribute('id')\n    const placeholder = row.getAttribute('placeholder')\n    const name = row.getAttribute('name')\n\n    if (id) row.setAttribute('id', this.getNextValue(id, this.idFormat))\n    if (placeholder) row.setAttribute('placeholder', this.getNextValue(placeholder, this.placeholderFormat))\n    if (name) row.setAttribute('name', this.getNextValue(name, this.nameFormat))\n\n    return row\n  }\n\n  insertRow (reference, node) {\n    reference.parentNode.insertBefore(node, reference.nextSibling)\n  }\n\n  getNextValue (value, format) {\n    if (format) {\n      return format.includes('$')\n        ? format.replace(/\\$+/g, this.getPatternNumbers(format, format.split('$').length - 1))\n        : format.includes('@')\n          ? format.replace('@', this.getLetter(this.guessNextPatternNumber()))\n          : this.guessNextValue(value)\n    } else {\n      return this.guessNextValue(value, true)\n    }\n  }\n\n  getPatternNumbers (format, noDigits) {\n    return (Array(noDigits).fill('0').join('') + this.guessNextPatternNumber()).slice(-noDigits)\n  }\n\n  guessNextPatternNumber () {\n    const likelyAttribute =\n      this.lastRow.getAttribute('id') ||\n      this.lastRow.getAttribute('name') ||\n      this.lastRow.getAttribute('placeholder')\n\n    const numberGuessed = Number(likelyAttribute.replace(/^\\D+/g, '')) + 1\n\n    return numberGuessed\n  }\n\n  guessNextValue (value, detection) {\n    return detection\n      ? value.replace(/\\d+/g, n => ++n)\n      : this.hasNumber(value)\n        ? value.replace(/\\d+/g, this.getPatternNumbers(value, value.replace(/^\\D+/g, '').length))\n        : `${value}-${this.noRows}`\n  }\n\n  getLetter (number) {\n    return String.fromCharCode(96 + number).toUpperCase()\n  }\n\n  hasNumber (string) {\n    return /\\d/.test(string)\n  }\n}\n\nwindow.addEventListener('load', () => {\n  [...document.querySelectorAll('[data-action=\"magic-rows\"]')]\n    .forEach(form => new MagicRows(form))\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/magic-rows.js\n **/"],"sourceRoot":""}